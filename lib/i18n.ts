"use client"

import { useStore } from "./store"

export type Locale = "en" | "fr" | "ar"

export const translations = {
  en: {
    dir: "ltr",
    common: {
      currency: "DZD",
      actions: "Actions",
      cancel: "Cancel",
      save: "Save",
      delete: "Delete",
      edit: "Edit",
      id: "ID",
      optional: "optional",
    },
    login: {
      title: "REHAB Login",
      description: "Enter your credentials to access the delivery management system",
      email: "Email",
      password: "Password",
      submit: "Sign In",
      welcome: "Welcome back!",
      failed: "Login failed",
      userNotFound: "User not found. Try super@rehab.com",
      username: "Username",
      placeholderUser: "admin",
    },
    nav: {
      overview: "Overview",
      stock: "Stock / Supply",
      workers: "Delivery Workers",
      sheets: "Sheets",
      companies: "Companies",
      admins: "Admins",
      treasure: "Treasure",
      settings: "Settings",
      logout: "Logout",
      dashboard: "Dashboard",
    },
    dashboard: {
      title: "REHAB Dashboard",
      subtitle: "Welcome back. Here is what is happening today.",
      stats: {
        products: "Total Products",
        workers: "Active Workers",
        companies: "Partner Companies",
        admins: "Total Admins",
      },
      recent: "Recent Activity",
      recentEmpty: "No recent activity found.",
      recentItem: "New product added for {client}",
      performanceTitle: "Delivery Performance",
      performanceSubtitle: "Ready for expansion",
      performanceDesc: "Manage your fleet and companies in one place.",
    },
    companies: {
      title: "Partner Companies",
      subtitle: "Manage companies and their fixed benefit per product.",
      add: "Add Company",
      dialogTitle: "Add New Company",
      name: "Company Name",
      benefit: "Benefit Amount (DZD)",
      submit: "Create Company",
      benefitHelp: "Benefit",
      companyId: "Company ID:",
      toastAddedTitle: "Company added",
      toastAddedDesc: "{name} is now in the system.",
      toastFailedTitle: "Failed to add company",
    },
    stock: {
      title: "Stock Management",
      subtitle: "Manage and track your products inventory.",
      add: "Add Product",
      dialogTitle: "Add New Product",
      client: "Client Name",
      company: "Company",
      phone: "Phone Number",
      price: "Price (DZD)",
      submit: "Create Product",
      search: "Search by client or ID...",
      filterAll: "All Companies",
      table: {
        id: "ID",
        client: "Client",
        company: "Company",
        price: "Price",
        status: "Status",
        actions: "Actions",
      },
      idPlaceholder: "Scan or type ID (auto-assigned if blank)",
      status: {
        inStock: "In Stock",
        delivery: "Delivery",
        delivered: "Delivered",
        canceled: "Canceled",
      },
      empty: "No products found.",
    },
    workers: {
      title: "Delivery Workers",
      subtitle: "Manage your delivery team and their commissions.",
      add: "Add Worker",
      dialogTitle: "Add New Delivery Worker",
      name: "Full Name",
      phone: "Phone Number",
      commission: "Commission per Delivery (DZD)",
      submit: "Register Worker",
      profilePic: "Profile Pic",
      certificates: "Certificates",
      idLabel: "ID",
      perDelivery: "/ delivery",
      edit: "Edit Profile",
      delete: "Delete",
      empty: "No workers registered yet.",
    },
    sheets: {
      title: "Worker Sheets",
      subtitle: "View worker assignments and manage product distribution.",
      team: "Delivery Team",
      assignments: "assignments",
      emptyWorkers: "No workers found.",
      sheetTitle: "{name}'s Sheet",
      commission: "Commission: {value} DZD / product",
      affect: "Affect Product",
      table: {
        id: "Product ID",
        client: "Client",
        company: "Company",
        price: "Price",
        status: "Status",
        action: "Action",
      },
      detach: "Detach",
      noAssignments: "No products currently assigned to this worker.",
      selectWorker: "Select a worker from the list to view their delivery sheet.",
      modalTitle: "Affect Product to {name}",
      selectProduct: "Select Product from Stock",
      searchPlaceholder: "Search available products...",
      confirm: "Confirm Assignment",
      assigning: "Assigning...",
    },
    adminsSection: {
      adminManagement: "Admin Management",
      createAndManageAccessLevels: "Create and manage access levels for your team.",
      addAdmin: "Add Admin",
      inviteNewAdmin: "Invite New Admin",
      name: "Name",
      emailAddress: "Email Address",
      createAdminAccount: "Create Admin Account",
      user: "User",
      role: "Role",
      actions: "Actions",
      viewDetails: "View Details",
      toggleSuperStatus: "Toggle Super Status",
      userDetails: "User Details",
      fullName: "Full Name",
      userID: "User ID",
      dangerZone: "Danger Zone",
      removeUserAccess: "Remove User Access",
      cannotRemoveOwnAccess: "You cannot remove your own administrative access.",
      username: "Username",
      password: "Password",
      removeAdmin: "Remove Admin",
      accessDenied: "Access Denied",
    },
    treasure: {
      title: "Treasure",
      subtitle: "Delivered products, revenue, and benefit summary.",
      cards: {
        delivered: "Total Delivered",
        revenue: "Total Revenue",
        revenueHint: "Sum of company benefits",
        workerFees: "Worker Fees",
        workerFeesHint: "Total commissions paid",
        final: "Final Benefit",
        finalHint: "Revenue - Worker fees",
      },
      tableTitle: "Delivered Products",
      filterAll: "All Companies",
      table: {
        id: "ID",
        client: "Client",
        company: "Company",
        status: "Status",
        worker: "Worker",
        companyBenefit: "Company Benefit",
        workerFee: "Worker Fee",
        net: "Net Benefit",
      },
      empty: "No delivered products yet.",
      emptyFiltered: "No delivered products for this company yet.",
      resetButton: "Reset Data",
      resetTitle: "Reset Treasure Data",
      resetDescription: "This will delete all products and clear totals. This cannot be undone.",
      resetConfirm: "Delete all",
    },
    settingsPage: {
      title: "Settings",
      subtitle: "Adjust theme, language, and account preferences.",
      theme: "Theme",
      themeLight: "Light",
      themeDark: "Dark",
      language: "Language",
      logout: "Logout",
      danger: "Danger Zone",
    },
  },
  fr: {
    dir: "ltr",
    common: {
      currency: "DZD",
      actions: "Actions",
      cancel: "Annuler",
      save: "Enregistrer",
      delete: "Supprimer",
      edit: "Modifier",
      id: "ID",
      optional: "optionnel",
    },
    login: {
      title: "Connexion REHAB",
      description: "Entrez vos identifiants pour accéder au système de gestion",
      email: "Email",
      password: "Mot de passe",
      submit: "Se connecter",
      welcome: "Bon retour !",
      failed: "Échec de la connexion",
      userNotFound: "Utilisateur non trouvé. Essayez super@rehab.com",
      username: "Nom d'utilisateur",
      placeholderUser: "admin",
    },
    nav: {
      overview: "Aperçu",
      stock: "Stock / Appro",
      workers: "Livreurs",
      sheets: "Feuilles",
      companies: "Entreprises",
      admins: "Administrateurs",
      treasure: "Trésorerie",
      settings: "Paramètres",
      logout: "Déconnexion",
      dashboard: "Tableau de bord",
    },
    dashboard: {
      title: "Tableau de bord REHAB",
      subtitle: "Bon retour. Voici ce qu'il se passe aujourd'hui.",
      stats: {
        products: "Produits totaux",
        workers: "Livreurs actifs",
        companies: "Partenaires",
        admins: "Admins totaux",
      },
      recent: "Activité récente",
      recentEmpty: "Aucune activité récente.",
      recentItem: "Nouveau produit ajouté pour {client}",
      performanceTitle: "Performance de livraison",
      performanceSubtitle: "Prêt pour l'expansion",
      performanceDesc: "Gérez votre flotte et vos entreprises en un seul endroit.",
    },
    companies: {
      title: "Entreprises partenaires",
      subtitle: "Gérez les entreprises et leur bénéfice fixe par produit.",
      add: "Ajouter une entreprise",
      dialogTitle: "Ajouter une nouvelle entreprise",
      name: "Nom de l'entreprise",
      benefit: "Montant du bénéfice (DZD)",
      submit: "Créer l'entreprise",
      benefitHelp: "Bénéfice",
      companyId: "ID Entreprise :",
      toastAddedTitle: "Entreprise ajoutée",
      toastAddedDesc: "{name} est maintenant dans le système.",
      toastFailedTitle: "Échec de l'ajout de l'entreprise",
    },
    stock: {
      title: "Gestion du stock",
      subtitle: "Gérez et suivez votre inventaire produits.",
      add: "Ajouter un produit",
      dialogTitle: "Ajouter un nouveau produit",
      client: "Nom du client",
      company: "Entreprise",
      phone: "Numéro de téléphone",
      price: "Prix (DZD)",
      submit: "Créer le produit",
      search: "Rechercher par client ou ID...",
      filterAll: "Toutes les entreprises",
      table: {
        id: "ID",
        client: "Client",
        company: "Entreprise",
        price: "Prix",
        status: "Statut",
        actions: "Actions",
      },
      idPlaceholder: "Scannez ou saisissez l'ID (automatique si vide)",
      status: {
        inStock: "En stock",
        delivery: "En livraison",
        delivered: "Livré",
        canceled: "Annulé",
      },
      empty: "Aucun produit trouvé.",
    },
    workers: {
      title: "Livreurs",
      subtitle: "Gérez votre équipe de livraison et leurs commissions.",
      add: "Ajouter un livreur",
      dialogTitle: "Ajouter un nouveau livreur",
      name: "Nom complet",
      phone: "Numéro de téléphone",
      commission: "Commission par livraison (DZD)",
      submit: "Enregistrer le livreur",
      profilePic: "Photo de profil",
      certificates: "Certificats",
      idLabel: "ID",
      perDelivery: "/ livraison",
      edit: "Modifier le profil",
      delete: "Supprimer",
      empty: "Aucun livreur enregistré pour l'instant.",
    },
    sheets: {
      title: "Feuilles des livreurs",
      subtitle: "Voir les affectations et gérer la distribution des produits.",
      team: "Équipe de livraison",
      assignments: "affectations",
      emptyWorkers: "Aucun livreur trouvé.",
      sheetTitle: "Feuille de {name}",
      commission: "Commission : {value} DZD / produit",
      affect: "Affecter un produit",
      table: {
        id: "ID Produit",
        client: "Client",
        company: "Entreprise",
        price: "Prix",
        status: "Statut",
        action: "Action",
      },
      detach: "Détacher",
      noAssignments: "Aucun produit affecté à ce livreur.",
      selectWorker: "Sélectionnez un livreur pour voir sa feuille.",
      modalTitle: "Affecter un produit à {name}",
      selectProduct: "Sélectionner un produit du stock",
      searchPlaceholder: "Rechercher des produits disponibles...",
      confirm: "Confirmer l'affectation",
      assigning: "Affectation...",
    },
    adminsSection: {
      adminManagement: "Gestion des administrateurs",
      createAndManageAccessLevels: "Créez et gérez les niveaux d'accès pour votre équipe.",
      addAdmin: "Ajouter un admin",
      inviteNewAdmin: "Inviter un nouvel admin",
      name: "Nom",
      emailAddress: "Adresse email",
      createAdminAccount: "Créer le compte admin",
      user: "Utilisateur",
      role: "Rôle",
      actions: "Actions",
      viewDetails: "Voir les détails",
      toggleSuperStatus: "Changer le statut Super",
      userDetails: "Détails de l'utilisateur",
      fullName: "Nom complet",
      userID: "ID utilisateur",
      dangerZone: "Zone de danger",
      removeUserAccess: "Supprimer l'accès utilisateur",
      cannotRemoveOwnAccess: "Vous ne pouvez pas supprimer votre propre accès.",
      username: "Nom d'utilisateur",
      password: "Mot de passe",
      removeAdmin: "Supprimer l'admin",
      accessDenied: "Accès refusé",
    },
    treasure: {
      title: "Trésorerie",
      subtitle: "Produits livrés, revenus et bénéfices.",
      cards: {
        delivered: "Total livrés",
        revenue: "Revenu total",
        revenueHint: "Somme des bénéfices entreprise",
        workerFees: "Frais livreurs",
        workerFeesHint: "Commissions totales",
        final: "Bénéfice final",
        finalHint: "Revenu - frais livreurs",
      },
      tableTitle: "Produits livrés",
      filterAll: "Toutes les entreprises",
      table: {
        id: "ID",
        client: "Client",
        company: "Entreprise",
        status: "Statut",
        worker: "Livreur",
        companyBenefit: "Bénéfice entreprise",
        workerFee: "Frais livreur",
        net: "Bénéfice net",
      },
      empty: "Aucun produit livré pour l'instant.",
      emptyFiltered: "Aucun produit livré pour cette entreprise.",
      resetButton: "Réinitialiser les données",
      resetTitle: "Réinitialiser la trésorerie",
      resetDescription: "Cette action supprime tous les produits et remet les totaux à zéro. Action irréversible.",
      resetConfirm: "Tout supprimer",
    },
    settingsPage: {
      title: "Paramètres",
      subtitle: "Ajustez le thème, la langue et le compte.",
      theme: "Thème",
      themeLight: "Clair",
      themeDark: "Sombre",
      language: "Langue",
      logout: "Déconnexion",
      danger: "Zone de danger",
    },
  },
  ar: {
    dir: "rtl",
    common: {
      currency: "د.ج",
      actions: "إجراءات",
      cancel: "إلغاء",
      save: "حفظ",
      delete: "حذف",
      edit: "تعديل",
      id: "المعرف",
      optional: "اختياري",
    },
    login: {
      title: "تسجيل الدخول REHAB",
      description: "أدخل بياناتك للوصول إلى نظام إدارة التوصيل",
      email: "البريد الإلكتروني",
      password: "كلمة المرور",
      submit: "تسجيل الدخول",
      welcome: "مرحباً بعودتك!",
      failed: "فشل تسجيل الدخول",
      userNotFound: "المستخدم غير موجود. جرّب super@rehab.com",
      username: "اسم المستخدم",
      placeholderUser: "admin",
    },
    nav: {
      overview: "نظرة عامة",
      stock: "المخزون / التوريد",
      workers: "عمال التوصيل",
      sheets: "الكشوفات",
      companies: "الشركات",
      admins: "المشرفون",
      treasure: "الخزينة",
      settings: "الإعدادات",
      logout: "تسجيل الخروج",
      dashboard: "لوحة التحكم",
    },
    dashboard: {
      title: "لوحة تحكم REHAB",
      subtitle: "مرحباً بعودتك. هذا ما يحدث اليوم.",
      stats: {
        products: "إجمالي المنتجات",
        workers: "العمال النشطون",
        companies: "شركات الشركاء",
        admins: "إجمالي المشرفين",
      },
      recent: "النشاط الأخير",
      recentEmpty: "لا توجد نشاطات حديثة.",
      recentItem: "تمت إضافة منتج جديد للعميل {client}",
      performanceTitle: "أداء التوصيل",
      performanceSubtitle: "جاهز للتوسع",
      performanceDesc: "أدر أسطولك وشركاتك في مكان واحد.",
    },
    companies: {
      title: "شركات الشركاء",
      subtitle: "إدارة الشركات ومبلغ الفائدة الثابت لكل منتج.",
      add: "إضافة شركة",
      dialogTitle: "إضافة شركة جديدة",
      name: "اسم الشركة",
      benefit: "مبلغ الفائدة (د.ج)",
      submit: "إنشاء الشركة",
      benefitHelp: "فائدة",
      companyId: "معرف الشركة:",
      toastAddedTitle: "تمت إضافة الشركة",
      toastAddedDesc: "{name} أصبحت في النظام.",
      toastFailedTitle: "فشل إضافة الشركة",
    },
    stock: {
      title: "إدارة المخزون",
      subtitle: "إدارة وتتبع مخزون المنتجات.",
      add: "إضافة منتج",
      dialogTitle: "إضافة منتج جديد",
      client: "اسم العميل",
      company: "الشركة",
      phone: "رقم الهاتف",
      price: "السعر (د.ج)",
      submit: "إنشاء المنتج",
      search: "ابحث بالعميل أو المعرف...",
      filterAll: "كل الشركات",
      table: {
        id: "المعرف",
        client: "العميل",
        company: "الشركة",
        price: "السعر",
        status: "الحالة",
        actions: "إجراءات",
      },
      idPlaceholder: "امسح أو اكتب المعرف (يُعيّن تلقائياً إذا تُرك فارغاً)",
      status: {
        inStock: "في المخزون",
        delivery: "قيد التوصيل",
        delivered: "تم التوصيل",
        canceled: "أُلغي",
      },
      empty: "لا توجد منتجات.",
    },
    workers: {
      title: "عمال التوصيل",
      subtitle: "إدارة فريق التوصيل والعمولات.",
      add: "إضافة عامل",
      dialogTitle: "إضافة عامل توصيل جديد",
      name: "الاسم الكامل",
      phone: "رقم الهاتف",
      commission: "عمولة لكل توصيل (د.ج)",
      submit: "تسجيل العامل",
      profilePic: "صورة الملف",
      certificates: "الشهادات",
      idLabel: "المعرف",
      perDelivery: "/ لكل توصيل",
      edit: "تعديل الملف",
      delete: "حذف",
      empty: "لا يوجد عمال مسجلون بعد.",
    },
    sheets: {
      title: "كشوفات العمال",
      subtitle: "عرض التعيينات وإدارة توزيع المنتجات.",
      team: "فريق التوصيل",
      assignments: "تعيينات",
      emptyWorkers: "لا يوجد عمال.",
      sheetTitle: "كشف {name}",
      commission: "العمولة: {value} د.ج / منتج",
      affect: "إسناد منتج",
      table: {
        id: "معرف المنتج",
        client: "العميل",
        company: "الشركة",
        price: "السعر",
        status: "الحالة",
        action: "إجراء",
      },
      detach: "فصل",
      noAssignments: "لا توجد منتجات مسندة لهذا العامل.",
      selectWorker: "اختر عاملًا لعرض كشفه.",
      modalTitle: "إسناد منتج إلى {name}",
      selectProduct: "اختر منتجاً من المخزون",
      searchPlaceholder: "ابحث عن منتجات متاحة...",
      confirm: "تأكيد الإسناد",
      assigning: "جارٍ الإسناد...",
    },
    adminsSection: {
      adminManagement: "إدارة المشرفين",
      createAndManageAccessLevels: "إنشاء وإدارة مستويات الوصول للفريق.",
      addAdmin: "إضافة مشرف",
      inviteNewAdmin: "دعوة مشرف جديد",
      name: "الاسم",
      emailAddress: "البريد الإلكتروني",
      createAdminAccount: "إنشاء حساب مشرف",
      user: "المستخدم",
      role: "الدور",
      actions: "الإجراءات",
      viewDetails: "عرض التفاصيل",
      toggleSuperStatus: "تبديل حالة المشرف المتميز",
      userDetails: "تفاصيل المستخدم",
      fullName: "الاسم الكامل",
      userID: "معرف المستخدم",
      dangerZone: "منطقة الخطر",
      removeUserAccess: "إزالة وصول المستخدم",
      cannotRemoveOwnAccess: "لا يمكنك إزالة وصولك الإداري.",
      username: "اسم المستخدم",
      password: "كلمة المرور",
      removeAdmin: "حذف المشرف",
      accessDenied: "الدخول مرفوض",
    },
    treasure: {
      title: "الخزينة",
      subtitle: "المنتجات المسلمة والإيرادات والفائدة.",
      cards: {
        delivered: "إجمالي المسلّم",
        revenue: "إجمالي الإيراد",
        revenueHint: "مجموع فوائد الشركات",
        workerFees: "رسوم العمال",
        workerFeesHint: "إجمالي العمولات",
        final: "الفائدة النهائية",
        finalHint: "الإيراد - رسوم العمال",
      },
      tableTitle: "المنتجات المسلّمة",
      filterAll: "كل الشركات",
      table: {
        id: "المعرف",
        client: "العميل",
        company: "الشركة",
        status: "الحالة",
        worker: "العامل",
        companyBenefit: "فائدة الشركة",
        workerFee: "رسوم العامل",
        net: "الفائدة الصافية",
      },
      empty: "لا توجد منتجات مسلّمة بعد.",
      emptyFiltered: "لا توجد منتجات مسلّمة لهذه الشركة.",
      resetButton: "إعادة تعيين البيانات",
      resetTitle: "إعادة تعيين الخزينة",
      resetDescription: "سيتم حذف جميع المنتجات وتصفير الإجماليات. هذا الإجراء غير قابل للتراجع.",
      resetConfirm: "حذف الكل",
    },
    settingsPage: {
      title: "الإعدادات",
      subtitle: "تغيير المظهر، اللغة، وحسابك.",
      theme: "المظهر",
      themeLight: "فاتح",
      themeDark: "داكن",
      language: "اللغة",
      logout: "تسجيل الخروج",
      danger: "منطقة الخطر",
    },
  },
}

export function useTranslations() {
  const { locale } = useStore()

  const safeLocale = locale || "en"

  const t = (path: string, vars?: Record<string, string | number>) => {
    const keys = path.split(".")
    let current: any = translations[safeLocale as Locale]

    for (const key of keys) {
      if (current && current[key] !== undefined) {
        current = current[key]
      } else {
        return path
      }
    }

    if (typeof current === "string" && vars) {
      return Object.keys(vars).reduce((acc, k) => acc.replace(`{${k}}`, String(vars[k])), current)
    }

    return current
  }

  return { t, locale: safeLocale, dir: translations[safeLocale as Locale].dir }
}
